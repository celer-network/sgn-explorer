(this["webpackJsonpsgn-explorer"]=this["webpackJsonpsgn-explorer"]||[]).push([[9],{1127:function(e,t,a){"use strict";a.r(t);var r=a(34),n=a(0),s=a.n(n),c=a(1),i=a.n(c),d=a(53),o=a.n(d),l=a(96),h=a(1025),w=a(83),m=a(1131),u=a(1026),p=a(136),g=a(70),v=a(1024),R=a(1044),S=a.n(R),y=a(294);class E extends s.a.Component{constructor(e,t){super(e),this.intendWithdraw=()=>{this.gateway.post("/validator/withdrawReward",{eth_addr:this.currentUser}).then(()=>{h.a.success("Success! Please wait a few seconds to trigger redeem.")}).catch(e=>{console.error(e)})},this.redeemReward=()=>{this.gateway.get("/validator/rewardRequest/".concat(this.currentUser)).then(e=>{this.contracts.SGN.methods.redeemReward.cacheSend("0x"+e.data.result)}).catch(e=>{console.error(e)})},this.renderActions=()=>[s.a.createElement(w.a,{type:"primary",onClick:this.intendWithdraw},"Initialize Redeem"),s.a.createElement(w.a,{type:"primary",onClick:this.redeemReward},"Redeem Reward")];var a=e.accounts,r=e.network.setting;this.currentUser=a[0],this.contracts=t.drizzle.contracts,this.state={},this.contracts.SGN.methods.redeemedServiceReward.cacheCall(this.currentUser),this.contracts.DPoS.methods.redeemedMiningReward.cacheCall(this.currentUser),this.gateway=S.a.create({baseURL:r.gateway,timeout:1e3}),this.gateway.get("/validator/reward/".concat(this.currentUser)).then(e=>{var t=e.data.result;this.setState({miningReward:t.mining_reward,serviceReward:t.service_reward})}).catch(e=>{console.error(e),e.response?h.a.error(e.response.data.error):h.a.warning("Please config gateway url in setting to load sgn reward correctly")})}render(){var e=this.props,t=e.DPoS,a=e.SGN,r=this.state,n=r.miningReward,c=r.serviceReward,i=t.redeemedMiningReward,d=a.redeemedServiceReward;return o.a.isEmpty(d)||o.a.isEmpty(i)?s.a.createElement(m.a,null):s.a.createElement(u.a,{title:"Reward",actions:this.renderActions()},s.a.createElement(p.a,{style:{marginTop:"10px"}},s.a.createElement(g.a,{span:12},s.a.createElement(v.a,{title:"Cumulative Mining Reward",value:Object(y.a)(n,!0)})),s.a.createElement(g.a,{span:12},s.a.createElement(v.a,{title:"Cumulative Service Reward",value:Object(y.a)(c,!0)})),s.a.createElement(g.a,{span:12},s.a.createElement(v.a,{title:"Redeemed Mining Reward",value:Object(y.a)(o.a.values(i)[0].value,!0)})),s.a.createElement(g.a,{span:12},s.a.createElement(v.a,{title:"Redeemed Service Reward",value:Object(y.a)(o.a.values(d)[0].value,!0)}))))}}E.contextTypes={drizzle:i.a.object},t.default=Object(l.drizzleConnect)(E,(function(e){var t=e.network,a=e.accounts,n=e.contracts,s=e.DPoS,c=e.SGN;return{network:t,accounts:a,DPoS:Object(r.a)(Object(r.a)({},s),n.DPoS),SGN:Object(r.a)(Object(r.a)({},c),n.SGN)}}))}}]);
//# sourceMappingURL=9.f6c3f5d6.chunk.js.map