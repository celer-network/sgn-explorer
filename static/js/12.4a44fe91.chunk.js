(this["webpackJsonpsgn-explorer"]=this["webpackJsonpsgn-explorer"]||[]).push([[12],{1138:function(e,t,a){"use strict";a.r(t);var r=a(32),s=a(17),o=a(1),l=a.n(o),n=a(0),i=a.n(n),c=a(65),d=a.n(c),u=a(90),p=a(908),h=a(1139),m=a(1137),b=a(1012),j=a(77),P=a(1128),f=a(1129),v=a(1013),O=a(269),x=a(397),C=O.a.Item;class g extends l.a.PureComponent{constructor(...e){super(...e),this.onChange=e=>{var t=this.props,a=t.name,r=t.onChange;r(a?{[a]:e}:e)}}render(){var e=this.props,t=e.allowClear,a=e.label,o=e.name,l=e.mode,n=e.value,i=Object(r.a)({},d.a.omit(this.props,["label","name","onChange"]));return"multiple"!==l||n||(i.value=[]),l||t||(i.allowClear=!1),Object(s.jsx)(C,{className:"dropdown-filter",label:a||d.a.capitalize(o),children:Object(s.jsx)(x.a,Object(r.a)(Object(r.a)({},i),{},{onChange:this.onChange}))})}}g.defaultProps={disabled:!1,label:"",placeholder:"all"};var k=a(906),S=a(270),V=a(922),z=a(939);class w extends l.a.Component{constructor(e,t){super(e),this.handleCreateParamProposal=()=>{var e=this.props.onClose;this.form.current.validateFields(((t,a)=>{if(t)console.log(t);else{var r=a.value,s=a.record;this.contracts.DPoS.methods.createParamProposal.cacheSend(s,r),e()}}))},this.state={},this.form=l.a.createRef(),this.contracts=t.drizzle.contracts}render(){var e=this.props,t=e.visible,a=e.onClose,r=[{name:"record",field:"select",fieldOptions:{options:V.b.map(((e,t)=>[t,e])),placeholder:"The parameter record"},rules:[{message:"Please select a record!",required:!0}]},{name:"value",label:"Value",field:"number",fieldOptions:{placeholder:"The new value"},rules:[Object(z.c)(0),{message:"Please enter a new value!",required:!0}]}];return Object(s.jsx)(k.a,{title:"Create Param Proposal",visible:t,onOk:this.handleCreateParamProposal,onCancel:a,children:Object(s.jsx)(S.a,{ref:this.form,items:r})})}}w.contextTypes={drizzle:i.a.object};var D=w;class M extends l.a.Component{constructor(e,t){super(e),this.toggleProposalModal=()=>{this.setState((e=>({isProposalModalVisible:!e.isProposalModalVisible})))},this.voteParam=(e,t)=>{this.contracts.DPoS.methods.voteParam.cacheSend(e,t)},this.confirmParamProposal=e=>{this.contracts.DPoS.methods.confirmParamProposal.cacheSend(e)},this.updateFilter=e=>{this.setState((t=>({filter:Object(r.a)(Object(r.a)({},t.filter),e)})))},this.renderFilters=()=>{var e=this.state.filter.status,t=d.a.map(V.c,((e,t)=>[e,t]));return Object(s.jsx)(g,{name:"status",options:t,style:{width:100},onChange:this.updateFilter,value:e,allowClear:!0})},this.renderProposal=e=>{var t=e.args[0],a=e.value,r=a.voteDeadline,o=a.record,l=a.newValue,n=Object(s.jsx)(p.a,{children:d.a.map(V.d,((e,a)=>Object(s.jsx)(p.a.Item,{onClick:()=>this.voteParam(t,e),children:a})))});return Object(s.jsx)(h.a.Item,{children:Object(s.jsx)(m.a,{actions:[Object(s.jsx)(b.a,{overlay:n,children:Object(s.jsx)(j.a,{type:"link",title:"Vote",icon:"audit",size:"small",children:"Vote"})}),Object(s.jsx)(j.a,{type:"link",title:"Vote",icon:"check-square",size:"small",onClick:()=>this.confirmParamProposal(t),children:"Confirm Proposal"})],children:Object(s.jsxs)(P.a,{children:[Object(s.jsx)(f.a,{span:12,children:Object(s.jsx)(v.a,{title:"Proposal ID",value:t})}),Object(s.jsx)(f.a,{span:12,children:Object(s.jsx)(v.a,{title:"Vote Deadline",value:r})}),Object(s.jsx)(f.a,{span:12,children:Object(s.jsx)(v.a,{title:"Record",value:V.b[o]})}),Object(s.jsx)(f.a,{span:12,children:Object(s.jsx)(v.a,{title:"New Value",value:l})})]})})})},this.renderProposals=()=>{var e=this.props.DPoS,t=this.state.filter,a=d.a.values(e.paramProposals);return a=d.a.filter(a,(e=>{var a=e.value.status;return console.log(e.value),t.status===a})),Object(s.jsx)(h.a,{grid:{gutter:16,column:2},dataSource:a,renderItem:this.renderProposal})},this.state={isProposalModalVisible:!1,filter:{status:"1"}},this.contracts=t.drizzle.contracts}render(){var e=this.state.isProposalModalVisible;return Object(s.jsxs)(m.a,{title:"Govern",extra:Object(s.jsx)(j.a,{type:"primary",onClick:this.toggleProposalModal,children:"Create Proposal"}),children:[this.renderFilters(),this.renderProposals(),Object(s.jsx)(D,{visible:e,onClose:this.toggleProposalModal})]})}}M.contextTypes={drizzle:i.a.object};t.default=Object(u.drizzleConnect)(M,(function(e){var t=e.contracts,a=e.DPoS;return{DPoS:Object(r.a)(Object(r.a)({},a),t.DPoS)}}))},922:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l}));var r=["Unbonded","Bonded","Unbonding"],s=["ProposalDeposit","GovernVoteTimeout","SlashTimeout","MinValidatorNum","MaxValidatorNum","MinStakeInPool","AdvanceNoticePeriod"],o={Voting:"1",Closed:"2"},l={Yes:1,No:2,Abstain:3}},928:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return s}));var r=2,s=Math.pow(10,r)},939:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return c}));var r,s=a(32),o=a(928),l=(r="CELR",{formatter:e=>e?"".concat(e).concat(r):"",parser:e=>e.replace(/[A-Z]/g,"")}),n=e=>({validator:(t,a,r)=>{a<e&&r("value is smaller than ".concat(e));r()}}),i={name:"commissionRate",label:"Commission Rate",field:"number",fieldOptions:Object(s.a)(Object(s.a)({},{formatter:e=>e?"".concat(e,"%"):"",parser:e=>e.replace(/[%]/g,"")}),{},{placeholder:"The commission rate",step:1/o.a,precision:o.b}),rules:[n(0),{message:"Please enter a commission rate!",required:!0}]},c={name:"rateLockEndTime",label:"Rate Lock End Time",fieldOptions:{placeholder:"The rate lock end time",prefix:"+",suffix:"blocks"},rules:[{message:"Please enter a rate lock end time!",required:!0}]}}}]);
//# sourceMappingURL=12.4a44fe91.chunk.js.map