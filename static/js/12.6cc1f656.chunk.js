(this["webpackJsonpsgn-explorer"]=this["webpackJsonpsgn-explorer"]||[]).push([[12],{1081:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return n}));var r=2,n=Math.pow(10,r)},1086:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return s}));var r,n=a(43),o=a(1081),c=(r="CELR",{formatter:e=>e?"".concat(e).concat(r):"",parser:e=>e.replace(/[A-Z]/g,"")}),l=e=>({validator:(t,a,r)=>{a<e&&r("value is smaller than ".concat(e));r()}}),i={name:"commissionRate",label:"Commission Rate",field:"number",fieldOptions:Object(n.a)(Object(n.a)({},{formatter:e=>e?"".concat(e,"%"):"",parser:e=>e.replace(/[%]/g,"")}),{},{placeholder:"The commission rate",step:1/o.a,precision:o.b}),rules:[l(0),{message:"Please enter a commission rate!",required:!0}]},s={name:"rateLockEndTime",label:"Rate Lock End Time",fieldOptions:{placeholder:"The rate lock end time",prefix:"+",suffix:"blocks"},rules:[{message:"Please enter a rate lock end time!",required:!0}]}},1105:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return c}));var r=["Unbonded","Bonded","Unbonding"],n=["ProposalDeposit","GovernVoteTimeout","SlashTimeout","MinValidatorNum","MaxValidatorNum","MinStakeInPool","AdvanceNoticePeriod"],o={Voting:"1",Closed:"2"},c={Yes:1,No:2,Abstain:3}},1343:function(e,t,a){"use strict";a.r(t);var r=a(43),n=a(0),o=a.n(n),c=a(4),l=a.n(c),i=a(82),s=a.n(i),m=a(109),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"},d=a(103),p=function(e,t){return n.createElement(d.a,Object.assign({},e,{ref:t,icon:u}))};p.displayName="AuditOutlined";var h=n.forwardRef(p),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M433.1 657.7a31.8 31.8 0 0051.7 0l210.6-292c3.8-5.3 0-12.7-6.5-12.7H642c-10.2 0-19.9 4.9-25.9 13.3L459 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H315c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"check-square",theme:"outlined"},f=function(e,t){return n.createElement(d.a,Object.assign({},e,{ref:t,icon:v}))};f.displayName="CheckSquareOutlined";var b=n.forwardRef(f),g=a(1059),E=a(68),O=a(2),P=a(5),y=a(12),C=a(42),j=a(1),x=a.n(j),S=a(1200),z=a(1114),N=a(175),w=a(83),k=a(1209),M=a(532),V=a(527),H=a(24),D=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a},I=function(e){var t=e.prefixCls,a=e.children,r=e.actions,o=e.extra,c=e.className,l=e.colStyle,i=D(e,["prefixCls","children","actions","extra","className","colStyle"]),s=n.useContext(R),m=s.grid,u=s.itemLayout,d=n.useContext(w.b).getPrefixCls,p=d("list",t),h=r&&r.length>0&&n.createElement("ul",{className:"".concat(p,"-item-action"),key:"actions"},r.map((function(e,t){return n.createElement("li",{key:"".concat(p,"-item-action-").concat(t)},e,t!==r.length-1&&n.createElement("em",{className:"".concat(p,"-item-action-split")}))}))),v=m?"div":"li",f=n.createElement(v,Object(O.a)({},i,{className:x()("".concat(p,"-item"),Object(P.a)({},"".concat(p,"-item-no-flex"),!("vertical"===u?o:!function(){var e;return n.Children.forEach(a,(function(t){"string"===typeof t&&(e=!0)})),e&&n.Children.count(a)>1}())),c)}),"vertical"===u&&o?[n.createElement("div",{className:"".concat(p,"-item-main"),key:"content"},a,h),n.createElement("div",{className:"".concat(p,"-item-extra"),key:"extra"},o)]:[a,h,Object(H.a)(o,{key:"extra"})]);return m?n.createElement(V.a,{flex:1,style:l},f):f};I.Meta=function(e){var t=e.prefixCls,a=e.className,r=e.avatar,o=e.title,c=e.description,l=D(e,["prefixCls","className","avatar","title","description"]),i=(0,n.useContext(w.b).getPrefixCls)("list",t),s=x()("".concat(i,"-item-meta"),a),m=n.createElement("div",{className:"".concat(i,"-item-meta-content")},o&&n.createElement("h4",{className:"".concat(i,"-item-meta-title")},o),c&&n.createElement("div",{className:"".concat(i,"-item-meta-description")},c));return n.createElement("div",Object(O.a)({},l,{className:s}),r&&n.createElement("div",{className:"".concat(i,"-item-meta-avatar")},r),(o||c)&&m)};var T=I,L=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a},R=n.createContext({});R.Consumer;function q(e){var t,a=e.pagination,r=void 0!==a&&a,o=e.prefixCls,c=e.bordered,l=void 0!==c&&c,i=e.split,s=void 0===i||i,m=e.className,u=e.children,d=e.itemLayout,p=e.loadMore,h=e.grid,v=e.dataSource,f=void 0===v?[]:v,b=e.size,g=e.header,j=e.footer,V=e.loading,H=void 0!==V&&V,D=e.rowKey,I=e.renderItem,T=e.locale,q=L(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),F=r&&"object"===Object(C.a)(r)?r:{},A=n.useState(F.defaultCurrent||1),B=Object(y.a)(A,2),G=B[0],J=B[1],K=n.useState(F.defaultPageSize||10),U=Object(y.a)(K,2),W=U[0],Y=U[1],Z=n.useContext(w.b),Q=Z.getPrefixCls,X=Z.renderEmpty,$=Z.direction,_={},ee=function(e){return function(t,a){J(t),Y(a),r&&r[e]&&r[e](t,a)}},te=ee("onChange"),ae=ee("onShowSizeChange"),re=Q("list",o),ne=H;"boolean"===typeof ne&&(ne={spinning:ne});var oe=ne&&ne.spinning,ce="";switch(b){case"large":ce="lg";break;case"small":ce="sm"}var le=x()(re,(t={},Object(P.a)(t,"".concat(re,"-vertical"),"vertical"===d),Object(P.a)(t,"".concat(re,"-").concat(ce),ce),Object(P.a)(t,"".concat(re,"-split"),s),Object(P.a)(t,"".concat(re,"-bordered"),l),Object(P.a)(t,"".concat(re,"-loading"),oe),Object(P.a)(t,"".concat(re,"-grid"),!!h),Object(P.a)(t,"".concat(re,"-something-after-last-item"),!!(p||r||j)),Object(P.a)(t,"".concat(re,"-rtl"),"rtl"===$),t),m),ie=Object(O.a)(Object(O.a)(Object(O.a)({},{current:1,total:0}),{total:f.length,current:G,pageSize:W}),r||{}),se=Math.ceil(ie.total/ie.pageSize);ie.current>se&&(ie.current=se);var me=r?n.createElement("div",{className:"".concat(re,"-pagination")},n.createElement(k.a,Object(O.a)({},ie,{onChange:te,onShowSizeChange:ae}))):null,ue=Object(E.a)(f);r&&f.length>(ie.current-1)*ie.pageSize&&(ue=Object(E.a)(f).splice((ie.current-1)*ie.pageSize,ie.pageSize));var de=Object(z.a)(),pe=n.useMemo((function(){for(var e=0;e<N.b.length;e+=1){var t=N.b[e];if(de[t])return t}}),[de]),he=n.useMemo((function(){if(h){var e=pe&&h[pe]?h[pe]:h.column;return e?{width:"".concat(100/e,"%"),maxWidth:"".concat(100/e,"%")}:void 0}}),[null===h||void 0===h?void 0:h.column,pe]),ve=oe&&n.createElement("div",{style:{minHeight:53}});if(ue.length>0){var fe=ue.map((function(e,t){return function(e,t){return I?((a="function"===typeof D?D(e):"string"===typeof D?e[D]:e.key)||(a="list-item-".concat(t)),_[t]=a,I(e,t)):null;var a}(e,t)})),be=n.Children.map(fe,(function(e,t){return n.createElement("div",{key:_[t],style:he},e)}));ve=h?n.createElement(M.a,{gutter:h.gutter},be):n.createElement("ul",{className:"".concat(re,"-items")},fe)}else u||oe||(ve=function(e,t){return n.createElement("div",{className:"".concat(e,"-empty-text")},T&&T.emptyText||t("List"))}(re,X));var ge=ie.position||"bottom";return n.createElement(R.Provider,{value:{grid:h,itemLayout:d}},n.createElement("div",Object(O.a)({className:le},q),("top"===ge||"both"===ge)&&me,g&&n.createElement("div",{className:"".concat(re,"-header")},g),n.createElement(S.a,ne,ve,u),j&&n.createElement("div",{className:"".concat(re,"-footer")},j),p||("bottom"===ge||"both"===ge)&&me))}q.Item=T;var F=q,A=a(1347),B=a(1115),G=a(76),J=a(1061),K=a(1062),U=a(1344),W=a(329),Y=(a(533),a(465)),Z=W.a.Item;class Q extends o.a.PureComponent{constructor(...e){super(...e),this.onChange=e=>{var t=this.props,a=t.name,r=t.onChange;r(a?{[a]:e}:e)}}render(){var e=this.props,t=e.allowClear,a=e.label,n=e.name,c=e.mode,l=e.value,i=Object(r.a)({},s.a.omit(this.props,["label","name","onChange"]));return"multiple"!==c||l||(i.value=[]),c||t||(i.allowClear=!1),o.a.createElement(Z,{className:"dropdown-filter",label:a||s.a.capitalize(n)},o.a.createElement(Y.a,Object.assign({},i,{onChange:this.onChange})))}}Q.defaultProps={disabled:!1,label:"",placeholder:"all"};var X=a(1058),$=a(335),_=a(1105),ee=a(1086);class te extends o.a.Component{constructor(e,t){super(e),this.handleCreateParamProposal=()=>{var e=this.props.onClose;this.form.current.validateFields((t,a)=>{if(t)console.log(t);else{var r=a.value,n=a.record;this.contracts.DPoS.methods.createParamProposal.cacheSend(n,r),e()}})},this.state={},this.form=o.a.createRef(),this.contracts=t.drizzle.contracts}render(){var e=this.props,t=e.visible,a=e.onClose,r=[{name:"record",field:"select",fieldOptions:{options:_.b.map((e,t)=>[t,e]),placeholder:"The parameter record"},rules:[{message:"Please select a record!",required:!0}]},{name:"value",label:"Value",field:"number",fieldOptions:{placeholder:"The new value"},rules:[Object(ee.c)(0),{message:"Please enter a new value!",required:!0}]}];return o.a.createElement(X.a,{title:"Create Param Proposal",visible:t,onOk:this.handleCreateParamProposal,onCancel:a},o.a.createElement($.a,{ref:this.form,items:r}))}}te.contextTypes={drizzle:l.a.object};var ae=te;class re extends o.a.Component{constructor(e,t){super(e),this.toggleProposalModal=()=>{this.setState(e=>({isProposalModalVisible:!e.isProposalModalVisible}))},this.voteParam=(e,t)=>{this.contracts.DPoS.methods.voteParam.cacheSend(e,t)},this.confirmParamProposal=e=>{this.contracts.DPoS.methods.confirmParamProposal.cacheSend(e)},this.updateFilter=e=>{this.setState(t=>({filter:Object(r.a)(Object(r.a)({},t.filter),e)}))},this.renderFilters=()=>{var e=this.state.filter.status,t=s.a.map(_.c,(e,t)=>[e,t]);return o.a.createElement(Q,{name:"status",options:t,style:{width:100},onChange:this.updateFilter,value:e,allowClear:!0})},this.renderProposal=e=>{var t=e.args[0],a=e.value,r=a.voteDeadline,n=a.record,c=a.newValue,l=o.a.createElement(g.a,null,s.a.map(_.d,(e,a)=>o.a.createElement(g.a.Item,{onClick:()=>this.voteParam(t,e)},a)));return o.a.createElement(F.Item,null,o.a.createElement(A.a,{actions:[o.a.createElement(B.a,{overlay:l},o.a.createElement(G.a,{type:"link",title:"Vote",icon:o.a.createElement(h,null),size:"small"},"Vote")),o.a.createElement(G.a,{type:"link",title:"Vote",icon:o.a.createElement(b,null),size:"small",onClick:()=>this.confirmParamProposal(t)},"Confirm Proposal")]},o.a.createElement(J.a,null,o.a.createElement(K.a,{span:12},o.a.createElement(U.a,{title:"Proposal ID",value:t})),o.a.createElement(K.a,{span:12},o.a.createElement(U.a,{title:"Vote Deadline",value:r})),o.a.createElement(K.a,{span:12},o.a.createElement(U.a,{title:"Record",value:_.b[n]})),o.a.createElement(K.a,{span:12},o.a.createElement(U.a,{title:"New Value",value:c})))))},this.renderProposals=()=>{var e=this.props.DPoS,t=this.state.filter,a=s.a.values(e.paramProposals);return a=s.a.filter(a,e=>{var a=e.value.status;return console.log(e.value),t.status===a}),o.a.createElement(F,{grid:{gutter:16,column:2},dataSource:a,renderItem:this.renderProposal})},this.state={isProposalModalVisible:!1,filter:{status:"1"}},this.contracts=t.drizzle.contracts}render(){var e=this.state.isProposalModalVisible;return o.a.createElement(A.a,{title:"Govern",extra:o.a.createElement(G.a,{type:"primary",onClick:this.toggleProposalModal},"Create Proposal")},this.renderFilters(),this.renderProposals(),o.a.createElement(ae,{visible:e,onClose:this.toggleProposalModal}))}}re.contextTypes={drizzle:l.a.object};t.default=Object(m.drizzleConnect)(re,(function(e){var t=e.contracts,a=e.DPoS;return{DPoS:Object(r.a)(Object(r.a)({},a),t.DPoS)}}))}}]);
//# sourceMappingURL=12.6cc1f656.chunk.js.map