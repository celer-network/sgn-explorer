(this["webpackJsonpsgn-explorer"]=this["webpackJsonpsgn-explorer"]||[]).push([[9],{1034:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return i}));var n=["Unbonded","Bonded","Unbonding"],a=["ProposalDeposit","GovernVoteTimeout","SlashTimeout","MinValidatorNum","MaxValidatorNum","MinStakeInPool","AdvanceNoticePeriod"],o={Voting:"1",Closed:"2"},i={Yes:1,No:2,Abstain:3}},1137:function(e,t,r){"use strict";r.r(t);var n=r(30),a=r(13),o=r(0),i=r.n(o),c=r(1),l=r.n(c),s=r(55),u=r.n(s),p=r(98),f=r(1024),m=r(3),d=r.n(m),h=r(29),y=r(1050),b=r(94),g=r(1059),v=r(292),j=r(221);function O(e){if(!o.isValidElement(e))return e;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return o.cloneElement.apply(o,[e].concat(r))}function P(e){return(P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var a=k(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return N(this,r)}}function N(e,t){return!t||"object"!==P(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var I=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};function M(e,t){return e[t]&&Math.floor(24/e[t])}var T=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(i,e);var t,r,n,a=E(i);function i(){var e;return S(this,i),(e=a.apply(this,arguments)).renderItem=function(t){var r=t.getPrefixCls,n=e.context,a=n.grid,i=n.itemLayout,c=e.props,l=c.prefixCls,s=c.children,u=c.actions,p=c.extra,f=c.className,m=I(c,["prefixCls","children","actions","extra","className"]),h=r("list",l),y=u&&u.length>0&&o.createElement("ul",{className:"".concat(h,"-item-action"),key:"actions"},u.map((function(e,t){return o.createElement("li",{key:"".concat(h,"-item-action-").concat(t)},e,t!==u.length-1&&o.createElement("em",{className:"".concat(h,"-item-action-split")}))}))),b=a?"div":"li",g=o.createElement(b,z({},m,{className:d()("".concat(h,"-item"),f,x({},"".concat(h,"-item-no-flex"),!e.isFlexMode()))}),"vertical"===i&&p?[o.createElement("div",{className:"".concat(h,"-item-main"),key:"content"},s,y),o.createElement("div",{className:"".concat(h,"-item-extra"),key:"extra"},p)]:[s,y,O(p,{key:"extra"})]);return a?o.createElement(j.a,{span:M(a,"column"),xs:M(a,"xs"),sm:M(a,"sm"),md:M(a,"md"),lg:M(a,"lg"),xl:M(a,"xl"),xxl:M(a,"xxl")},g):g},e}return t=i,(r=[{key:"isItemContainsTextNodeAndNotSingular",value:function(){var e,t=this.props.children;return o.Children.forEach(t,(function(t){"string"===typeof t&&(e=!0)})),e&&o.Children.count(t)>1}},{key:"isFlexMode",value:function(){var e=this.props.extra;return"vertical"===this.context.itemLayout?!!e:!this.isItemContainsTextNodeAndNotSingular()}},{key:"render",value:function(){return o.createElement(b.a,null,this.renderItem)}}])&&C(t.prototype,r),n&&C(t,n),i}(o.Component);function V(e){return(V="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var a=G(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){return!t||"object"!==V(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}T.Meta=function(e){return o.createElement(b.a,null,(function(t){var r=t.getPrefixCls,n=e.prefixCls,a=e.className,i=e.avatar,c=e.title,l=e.description,s=I(e,["prefixCls","className","avatar","title","description"]),u=r("list",n),p=d()("".concat(u,"-item-meta"),a),f=o.createElement("div",{className:"".concat(u,"-item-meta-content")},c&&o.createElement("h4",{className:"".concat(u,"-item-meta-title")},c),l&&o.createElement("div",{className:"".concat(u,"-item-meta-description")},l));return o.createElement("div",z({},s,{className:p}),i&&o.createElement("div",{className:"".concat(u,"-item-meta-avatar")},i),(c||l)&&f)}))},T.contextTypes={grid:c.any,itemLayout:c.string};var J=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},K=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(i,e);var t,r,n,a=q(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).defaultPaginationProps={current:1,total:0},t.keys={},t.onPaginationChange=t.triggerPaginationEvent("onChange"),t.onPaginationShowSizeChange=t.triggerPaginationEvent("onShowSizeChange"),t.renderItem=function(e,r){var n,a=t.props,o=a.renderItem,i=a.rowKey;return o?((n="function"===typeof i?i(e):"string"===typeof i?e[i]:e.key)||(n="list-item-".concat(r)),t.keys[r]=n,o(e,r)):null},t.renderEmpty=function(e,r){var n=t.props.locale;return o.createElement("div",{className:"".concat(e,"-empty-text")},n&&n.emptyText||r("List"))},t.renderList=function(e){var r,n=e.getPrefixCls,a=e.renderEmpty,i=t.state,c=i.paginationCurrent,l=i.paginationSize,s=t.props,u=s.prefixCls,p=s.bordered,f=s.split,m=s.className,b=s.children,j=s.itemLayout,O=s.loadMore,P=s.pagination,x=s.grid,S=s.dataSource,C=void 0===S?[]:S,w=s.size,E=s.header,N=s.footer,k=s.loading,z=J(s,["prefixCls","bordered","split","className","children","itemLayout","loadMore","pagination","grid","dataSource","size","header","footer","loading"]),I=n("list",u),M=k;"boolean"===typeof M&&(M={spinning:M});var T=M&&M.spinning,V="";switch(w){case"large":V="lg";break;case"small":V="sm"}var D=d()(I,m,(R(r={},"".concat(I,"-vertical"),"vertical"===j),R(r,"".concat(I,"-").concat(V),V),R(r,"".concat(I,"-split"),f),R(r,"".concat(I,"-bordered"),p),R(r,"".concat(I,"-loading"),T),R(r,"".concat(I,"-grid"),x),R(r,"".concat(I,"-something-after-last-item"),t.isSomethingAfterLastItem()),r)),L=A(A(A({},t.defaultPaginationProps),{total:C.length,current:c,pageSize:l}),P||{}),F=Math.ceil(L.total/L.pageSize);L.current>F&&(L.current=F);var q,U=P?o.createElement("div",{className:"".concat(I,"-pagination")},o.createElement(g.a,A({},L,{onChange:t.onPaginationChange,onShowSizeChange:t.onPaginationShowSizeChange}))):null,G=_(C);if(P&&C.length>(L.current-1)*L.pageSize&&(G=_(C).splice((L.current-1)*L.pageSize,L.pageSize)),q=T&&o.createElement("div",{style:{minHeight:53}}),G.length>0){var K=G.map((function(e,r){return t.renderItem(e,r)})),B=[];o.Children.forEach(K,(function(e,r){B.push(o.cloneElement(e,{key:t.keys[r]}))})),q=x?o.createElement(v.a,{gutter:x.gutter},B):o.createElement("ul",{className:"".concat(I,"-items")},B)}else b||T||(q=t.renderEmpty(I,a));var H=L.position||"bottom";return o.createElement("div",A({className:D},Object(h.a)(z,["rowKey","renderItem","locale"])),("top"===H||"both"===H)&&U,E&&o.createElement("div",{className:"".concat(I,"-header")},E),o.createElement(y.a,M,q,b),N&&o.createElement("div",{className:"".concat(I,"-footer")},N),O||("bottom"===H||"both"===H)&&U)};var r=e.pagination,n=r&&"object"===V(r)?r:{};return t.state={paginationCurrent:n.defaultCurrent||1,paginationSize:n.defaultPageSize||10},t}return t=i,(r=[{key:"getChildContext",value:function(){return{grid:this.props.grid,itemLayout:this.props.itemLayout}}},{key:"triggerPaginationEvent",value:function(e){var t=this;return function(r,n){var a=t.props.pagination;t.setState({paginationCurrent:r,paginationSize:n}),a&&a[e]&&a[e](r,n)}}},{key:"isSomethingAfterLastItem",value:function(){var e=this.props,t=e.loadMore,r=e.pagination,n=e.footer;return!!(t||r||n)}},{key:"render",value:function(){return o.createElement(b.a,null,this.renderList)}}])&&L(t.prototype,r),n&&L(t,n),i}(o.Component);K.Item=T,K.childContextTypes={grid:c.any,itemLayout:c.string},K.defaultProps={dataSource:[],bordered:!1,split:!0,loading:!1,pagination:!1};var B=r(1032),H=r(1060),Y=r(84),$=r(138),Q=r(71),W=r(1030),X=r(295),Z=r(438),ee=X.a.Item;class te extends i.a.PureComponent{constructor(...e){super(...e),this.onChange=e=>{var t=this.props,r=t.name,n=t.onChange;n(r?{[r]:e}:e)}}render(){var e=this.props,t=e.allowClear,r=e.label,o=e.name,i=e.mode,c=e.value,l=Object(n.a)({},u.a.omit(this.props,["label","name","onChange"]));return"multiple"!==i||c||(l.value=[]),i||t||(l.allowClear=!1),Object(a.jsx)(ee,{className:"dropdown-filter",label:r||u.a.capitalize(o),children:Object(a.jsx)(Z.a,Object(n.a)(Object(n.a)({},l),{},{onChange:this.onChange}))})}}te.defaultProps={disabled:!1,label:"",placeholder:"all"};var re=r(1022),ne=r(171),ae=r(1034),oe=r(297);class ie extends i.a.Component{constructor(e,t){super(e),this.handleCreateParamProposal=()=>{var e=this.props.onClose;this.form.current.validateFields(((t,r)=>{if(t)console.log(t);else{var n=r.value,a=r.record;this.contracts.DPoS.methods.createParamProposal.cacheSend(a,n),e()}}))},this.state={},this.form=i.a.createRef(),this.contracts=t.drizzle.contracts}render(){var e=this.props,t=e.visible,r=e.onClose,n=[{name:"record",field:"select",fieldOptions:{options:ae.b.map(((e,t)=>[t,e])),placeholder:"The parameter record"},rules:[{message:"Please select a record!",required:!0}]},{name:"value",label:"Value",field:"number",fieldOptions:{placeholder:"The new value"},rules:[Object(oe.c)(0),{message:"Please enter a new value!",required:!0}]}];return Object(a.jsx)(re.a,{title:"Create Param Proposal",visible:t,onOk:this.handleCreateParamProposal,onCancel:r,children:Object(a.jsx)(ne.a,{ref:this.form,items:n})})}}ie.contextTypes={drizzle:l.a.object};var ce=ie;class le extends i.a.Component{constructor(e,t){super(e),this.toggleProposalModal=()=>{this.setState((e=>({isProposalModalVisible:!e.isProposalModalVisible})))},this.voteParam=(e,t)=>{this.contracts.DPoS.methods.voteParam.cacheSend(e,t)},this.confirmParamProposal=e=>{this.contracts.DPoS.methods.confirmParamProposal.cacheSend(e)},this.updateFilter=e=>{this.setState((t=>({filter:Object(n.a)(Object(n.a)({},t.filter),e)})))},this.renderFilters=()=>{var e=this.state.filter.status,t=u.a.map(ae.c,((e,t)=>[e,t]));return Object(a.jsx)(te,{name:"status",options:t,style:{width:100},onChange:this.updateFilter,value:e,allowClear:!0})},this.renderProposal=e=>{var t=e.args[0],r=e.value,n=r.voteDeadline,o=r.record,i=r.newValue,c=Object(a.jsx)(f.a,{children:u.a.map(ae.d,((e,r)=>Object(a.jsx)(f.a.Item,{onClick:()=>this.voteParam(t,e),children:r})))});return Object(a.jsx)(K.Item,{children:Object(a.jsx)(B.a,{actions:[Object(a.jsx)(H.a,{overlay:c,children:Object(a.jsx)(Y.a,{type:"link",title:"Vote",icon:"audit",size:"small",children:"Vote"})}),Object(a.jsx)(Y.a,{type:"link",title:"Vote",icon:"check-square",size:"small",onClick:()=>this.confirmParamProposal(t),children:"Confirm Proposal"})],children:Object(a.jsxs)($.a,{children:[Object(a.jsx)(Q.a,{span:12,children:Object(a.jsx)(W.a,{title:"Proposal ID",value:t})}),Object(a.jsx)(Q.a,{span:12,children:Object(a.jsx)(W.a,{title:"Vote Deadline",value:n})}),Object(a.jsx)(Q.a,{span:12,children:Object(a.jsx)(W.a,{title:"Record",value:ae.b[o]})}),Object(a.jsx)(Q.a,{span:12,children:Object(a.jsx)(W.a,{title:"New Value",value:i})})]})})})},this.renderProposals=()=>{var e=this.props.DPoS,t=this.state.filter,r=u.a.values(e.paramProposals);return r=u.a.filter(r,(e=>{var r=e.value.status;return console.log(e.value),t.status===r})),Object(a.jsx)(K,{grid:{gutter:16,column:2},dataSource:r,renderItem:this.renderProposal})},this.state={isProposalModalVisible:!1,filter:{status:"1"}},this.contracts=t.drizzle.contracts}render(){var e=this.state.isProposalModalVisible;return Object(a.jsxs)(B.a,{title:"Govern",extra:Object(a.jsx)(Y.a,{type:"primary",onClick:this.toggleProposalModal,children:"Create Proposal"}),children:[this.renderFilters(),this.renderProposals(),Object(a.jsx)(ce,{visible:e,onClose:this.toggleProposalModal})]})}}le.contextTypes={drizzle:l.a.object};t.default=Object(p.drizzleConnect)(le,(function(e){var t=e.contracts,r=e.DPoS;return{DPoS:Object(n.a)(Object(n.a)({},r),t.DPoS)}}))}}]);
//# sourceMappingURL=9.86d4bbcd.chunk.js.map