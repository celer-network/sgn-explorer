{"version":3,"sources":["components/dpos/candidate-table.js","routes/dpos.js","utils/dpos.js","utils/unit.js","utils/constant.js","../node_modules/web3-eth-accounts/src sync"],"names":["columns","title","dataIndex","width","sorter","a","b","address","filters","_","map","CANDIDATE_STATUS","text","index","value","toString","filterMultiple","onFilter","record","status","render","defaultSortOrder","web3","utils","toBN","stakingPool","cmp","formatCelrValue","commissionRate","RATE_BASE","CandidateTable","React","Component","onRow","dispatch","this","props","onClick","routerRedux","push","pathname","dataSource","candidates","candidate","args","pagination","drizzleConnect","state","DPoS","values","getCandidateInfo","contextTypes","drizzle","PropTypes","object","contracts","PARAM_NAMES","PROPOSAL_STATUS","Voting","Closed","VOTE_TYPE","Yes","No","Abstain","showDecimal","unit","fromWei","split","formatCurrencyValue","RATE_PRECISION","webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id"],"mappings":"mRAYMA,EAAU,CACd,CACEC,MAAO,UACPC,UAAW,UACXC,MAAO,IACPC,OAAQ,CAACC,EAAGC,IAAMD,EAAEE,QAAUD,EAAEC,SAElC,CACEN,MAAO,SACPC,UAAW,SACXC,MAAO,IACPK,QAASC,IAAEC,IAAIC,KAAkB,CAACC,EAAMC,KAAP,CAC/BD,OACAE,MAAOD,EAAME,eAEfC,gBAAgB,EAChBC,SAAU,CAACH,EAAOI,IAAWA,EAAOC,SAAWL,EAC/CV,OAAQ,CAACC,EAAGC,IAAMD,EAAEc,OAASb,EAAEa,OAC/BC,OAASR,GAASD,IAAiBC,IAErC,CACEX,MAAO,eACPC,UAAW,cACXmB,iBAAkB,UAClBjB,OAAQ,CAACC,EAAGC,IACHgB,IAAKC,MAAMC,KAAKnB,EAAEoB,aAAaC,IAAIJ,IAAKC,MAAMC,KAAKlB,EAAEmB,cAE9DL,OAASR,GAASe,YAAgBf,IAEpC,CACEX,MAAO,aACPC,UAAW,iBACXC,MAAO,IACPC,OAAQ,CAACC,EAAGC,IAAMD,EAAEuB,eAAiBtB,EAAEsB,eACvCR,OAASR,GAAD,UAAaA,EAAOiB,IAApB,QAIZ,MAAMC,UAAuBC,IAAMC,UAAW,eAAD,oBAC3CC,MAASf,IAAY,IACXgB,EAAaC,KAAKC,MAAlBF,SAER,MAAO,CACLG,QAAS,KACPH,EACEI,cAAYC,KAAK,CACfC,SAAS,cAAD,OAAgBtB,EAAOX,eAOzCa,SAAU,IAEFqB,EADiBN,KAAKC,MAApBM,WACsBhC,KAAKiC,GAAD,YAAC,eAC9BA,EAAU7B,OADmB,IAEhCP,QAASoC,EAAUC,KAAK,OAG1B,OACE,cAAC,IAAD,CAAOH,WAAYA,EAAYzC,QAASA,EAAS6C,YAAY,EAAOZ,MAAOE,KAAKF,SAcvEa,+BAAehB,GAJ9B,SAAyBiB,GACvB,MAAO,MC5ET,MAAMC,UAAajB,IAAMC,UACvBZ,SAAU,IACA4B,EAASb,KAAKC,MAAdY,KAER,OACE,cAAC,IAAD,CAAM/C,MAAM,aAAZ,SACE,cAAC,EAAD,CAAgByC,WAAYjC,IAAEwC,OAAOD,EAAKE,uBAMlDF,EAAKG,aAAe,CAClBC,QAASC,IAAUC,QAWNR,mCAAeE,GAR9B,SAAyBD,GAAQ,IACvBQ,EAAoBR,EAApBQ,UAAWP,EAASD,EAATC,KAEnB,MAAO,CACLA,KAAK,2BAAMA,GAASO,EAAUP,W,iCC5BlC,wIAAO,IAAMrC,EAAmB,CAAC,WAAY,SAAU,aAE1C6C,EAAc,CACvB,kBACA,oBACA,eACA,kBACA,kBACA,iBACA,uBAGSC,EAAkB,CAAEC,OAAQ,IAAKC,OAAQ,KAEzCC,EAAY,CACrBC,IAAK,EACLC,GAAI,EACJC,QAAS,I,iCCjBb,8DA4BapC,GA5Bb,OA4B+B,CAACb,EAAOkD,IAZJ,EAAClD,EAAOmD,EAAMD,KAC/C,GAAKlD,EAIL,OAAIkD,EACI,GAAN,OAAU1C,IAAKC,MAAM2C,QAAQpD,GAA7B,YAAuCmD,GAGnC,GAAN,OAAU3C,IAAKC,MAAM2C,QAAQpD,GAAOqD,MAAM,KAAK,GAA/C,YAAqDF,IAI9CG,CAAoBtD,EAxBT,OAwBsBkD,K,iCC7B1C,oEAAO,IACMK,EAAiB,EACjBxC,EAAS,SAAG,GAAMwC,I,0DCF/B,SAASC,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,WAAa,MAAO,IAC/CL,EAAoBM,QAAUN,EAC9BO,EAAOC,QAAUR,EACjBA,EAAoBS,GAAK","file":"static/js/10.b65ceca9.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { drizzleConnect } from '@drizzle/react-plugin';\nimport { routerRedux } from 'dva/router';\nimport { Table } from 'antd';\nimport web3 from 'web3';\n\nimport { CANDIDATE_STATUS } from '../../utils/dpos';\nimport { formatCelrValue } from '../../utils/unit';\nimport { RATE_BASE } from '../../utils/constant';\n\nconst columns = [\n  {\n    title: 'Address',\n    dataIndex: 'address',\n    width: 450,\n    sorter: (a, b) => a.address - b.address\n  },\n  {\n    title: 'Status',\n    dataIndex: 'status',\n    width: 150,\n    filters: _.map(CANDIDATE_STATUS, (text, index) => ({\n      text,\n      value: index.toString()\n    })),\n    filterMultiple: false,\n    onFilter: (value, record) => record.status === value,\n    sorter: (a, b) => a.status - b.status,\n    render: (text) => CANDIDATE_STATUS[text]\n  },\n  {\n    title: 'Staking Pool',\n    dataIndex: 'stakingPool',\n    defaultSortOrder: 'descend',\n    sorter: (a, b) => {\n      return web3.utils.toBN(a.stakingPool).cmp(web3.utils.toBN(b.stakingPool));\n    },\n    render: (text) => formatCelrValue(text)\n  },\n  {\n    title: 'Commission',\n    dataIndex: 'commissionRate',\n    width: 140,\n    sorter: (a, b) => a.commissionRate - b.commissionRate,\n    render: (text) => `${text / RATE_BASE} %`\n  }\n];\n\nclass CandidateTable extends React.Component {\n  onRow = (record) => {\n    const { dispatch } = this.props;\n\n    return {\n      onClick: () => {\n        dispatch(\n          routerRedux.push({\n            pathname: `/candidate/${record.address}`\n          })\n        );\n      }\n    };\n  };\n\n  render() {\n    const { candidates } = this.props;\n    const dataSource = candidates.map((candidate) => ({\n      ...candidate.value,\n      address: candidate.args[0]\n    }));\n\n    return (\n      <Table dataSource={dataSource} columns={columns} pagination={false} onRow={this.onRow} />\n    );\n  }\n}\n\nCandidateTable.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  candidates: PropTypes.array.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nexport default drizzleConnect(CandidateTable, mapStateToProps);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { drizzleConnect } from '@drizzle/react-plugin';\nimport { Card } from 'antd';\n\nimport CandidateTable from '../components/dpos/candidate-table';\n\nclass DPoS extends React.Component {\n  render() {\n    const { DPoS } = this.props;\n\n    return (\n      <Card title=\"Validators\">\n        <CandidateTable candidates={_.values(DPoS.getCandidateInfo)} />\n      </Card>\n    );\n  }\n}\n\nDPoS.contextTypes = {\n  drizzle: PropTypes.object\n};\n\nfunction mapStateToProps(state) {\n  const { contracts, DPoS } = state;\n\n  return {\n    DPoS: { ...DPoS, ...contracts.DPoS }\n  };\n}\n\nexport default drizzleConnect(DPoS, mapStateToProps);\n","export const CANDIDATE_STATUS = ['Unbonded', 'Bonded', 'Unbonding'];\n\nexport const PARAM_NAMES = [\n    'ProposalDeposit',\n    'GovernVoteTimeout',\n    'SlashTimeout',\n    'MinValidatorNum',\n    'MaxValidatorNum',\n    'MinStakeInPool',\n    'AdvanceNoticePeriod'\n];\n\nexport const PROPOSAL_STATUS = { Voting: '1', Closed: '2' };\n\nexport const VOTE_TYPE = {\n    Yes: 1,\n    No: 2,\n    Abstain: 3\n};\n","import _ from 'lodash';\nimport web3 from 'web3';\n\nimport './network';\n\nexport const CELR = 'CELR';\n\nexport const getUnitByAddress = (supportedTokens, address) => {\n  const token = _.find(supportedTokens, (supportedToken) => supportedToken.address === address);\n\n  if (!token) {\n    return '';\n  }\n  return token.symbol;\n};\n\nexport const formatCurrencyValue = (value, unit, showDecimal) => {\n  if (!value) {\n    return;\n  }\n\n  if (showDecimal) {\n    return `${web3.utils.fromWei(value)} ${unit}`;\n  }\n\n  return `${web3.utils.fromWei(value).split('.')[0]} ${unit}`;\n};\n\nexport const formatCelrValue = (value, showDecimal) => {\n  return formatCurrencyValue(value, CELR, showDecimal);\n};\n","export const EMPTY_ADDRESS = '0x0000000000000000000000000000000000000000';\nexport const RATE_PRECISION = 2;\nexport const RATE_BASE = 10 ** RATE_PRECISION;\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 962;"],"sourceRoot":""}