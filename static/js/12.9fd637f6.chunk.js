(this["webpackJsonpsgn-explorer"]=this["webpackJsonpsgn-explorer"]||[]).push([[12],{1139:function(e,a,t){"use strict";t.r(a);var r=t(39),o=t(1),l=t.n(o),s=t(0),n=t.n(s),i=t(64),c=t.n(i),d=t(89),m=t(907),u=t(1136),p=t(1138),h=t(1011),P=t(76),f=t(1127),v=t(1128),b=t(1012),g=t(268),C=t(396),E=g.a.Item;class k extends l.a.PureComponent{constructor(...e){super(...e),this.onChange=e=>{var a=this.props,t=a.name,r=a.onChange;r(t?{[t]:e}:e)}}render(){var e=this.props,a=e.allowClear,t=e.label,o=e.name,s=e.mode,n=e.value,i=Object(r.a)({},c.a.omit(this.props,["label","name","onChange"]));return"multiple"!==s||n||(i.value=[]),s||a||(i.allowClear=!1),l.a.createElement(E,{className:"dropdown-filter",label:t||c.a.capitalize(o)},l.a.createElement(C.a,Object.assign({},i,{onChange:this.onChange})))}}k.defaultProps={disabled:!1,label:"",placeholder:"all"};var O=t(905),S=t(269),V=t(921),z=t(938);class j extends l.a.Component{constructor(e,a){super(e),this.handleCreateParamProposal=()=>{var e=this.props.onClose;this.form.current.validateFields((a,t)=>{if(a)console.log(a);else{var r=t.value,o=t.record;this.contracts.DPoS.methods.createParamProposal.cacheSend(o,r),e()}})},this.state={},this.form=l.a.createRef(),this.contracts=a.drizzle.contracts}render(){var e=this.props,a=e.visible,t=e.onClose,r=[{name:"record",field:"select",fieldOptions:{options:V.b.map((e,a)=>[a,e]),placeholder:"The parameter record"},rules:[{message:"Please select a record!",required:!0}]},{name:"value",label:"Value",field:"number",fieldOptions:{placeholder:"The new value"},rules:[Object(z.c)(0),{message:"Please enter a new value!",required:!0}]}];return l.a.createElement(O.a,{title:"Create Param Proposal",visible:a,onOk:this.handleCreateParamProposal,onCancel:t},l.a.createElement(S.a,{ref:this.form,items:r}))}}j.contextTypes={drizzle:n.a.object};var w=j;class x extends l.a.Component{constructor(e,a){super(e),this.toggleProposalModal=()=>{this.setState(e=>({isProposalModalVisible:!e.isProposalModalVisible}))},this.voteParam=(e,a)=>{this.contracts.DPoS.methods.voteParam.cacheSend(e,a)},this.confirmParamProposal=e=>{this.contracts.DPoS.methods.confirmParamProposal.cacheSend(e)},this.updateFilter=e=>{this.setState(a=>({filter:Object(r.a)(Object(r.a)({},a.filter),e)}))},this.renderFilters=()=>{var e=this.state.filter.status,a=c.a.map(V.c,(e,a)=>[e,a]);return l.a.createElement(k,{name:"status",options:a,style:{width:100},onChange:this.updateFilter,value:e,allowClear:!0})},this.renderProposal=e=>{var a=e.args[0],t=e.value,r=t.voteDeadline,o=t.record,s=t.newValue,n=l.a.createElement(m.a,null,c.a.map(V.d,(e,t)=>l.a.createElement(m.a.Item,{onClick:()=>this.voteParam(a,e)},t)));return l.a.createElement(u.a.Item,null,l.a.createElement(p.a,{actions:[l.a.createElement(h.a,{overlay:n},l.a.createElement(P.a,{type:"link",title:"Vote",icon:"audit",size:"small"},"Vote")),l.a.createElement(P.a,{type:"link",title:"Vote",icon:"check-square",size:"small",onClick:()=>this.confirmParamProposal(a)},"Confirm Proposal")]},l.a.createElement(f.a,null,l.a.createElement(v.a,{span:12},l.a.createElement(b.a,{title:"Proposal ID",value:a})),l.a.createElement(v.a,{span:12},l.a.createElement(b.a,{title:"Vote Deadline",value:r})),l.a.createElement(v.a,{span:12},l.a.createElement(b.a,{title:"Record",value:V.b[o]})),l.a.createElement(v.a,{span:12},l.a.createElement(b.a,{title:"New Value",value:s})))))},this.renderProposals=()=>{var e=this.props.DPoS,a=this.state.filter,t=c.a.values(e.paramProposals);return t=c.a.filter(t,e=>{var t=e.value.status;return console.log(e.value),a.status===t}),l.a.createElement(u.a,{grid:{gutter:16,column:2},dataSource:t,renderItem:this.renderProposal})},this.state={isProposalModalVisible:!1,filter:{status:"1"}},this.contracts=a.drizzle.contracts}render(){var e=this.state.isProposalModalVisible;return l.a.createElement(p.a,{title:"Govern",extra:l.a.createElement(P.a,{type:"primary",onClick:this.toggleProposalModal},"Create Proposal")},this.renderFilters(),this.renderProposals(),l.a.createElement(w,{visible:e,onClose:this.toggleProposalModal}))}}x.contextTypes={drizzle:n.a.object};a.default=Object(d.drizzleConnect)(x,(function(e){var a=e.contracts,t=e.DPoS;return{DPoS:Object(r.a)(Object(r.a)({},t),a.DPoS)}}))},921:function(e,a,t){"use strict";t.d(a,"a",(function(){return r})),t.d(a,"b",(function(){return o})),t.d(a,"c",(function(){return l})),t.d(a,"d",(function(){return s}));var r=["Unbonded","Bonded","Unbonding"],o=["ProposalDeposit","GovernVoteTimeout","SlashTimeout","MinValidatorNum","MaxValidatorNum","MinStakeInPool","AdvanceNoticePeriod"],l={Voting:"1",Closed:"2"},s={Yes:1,No:2,Abstain:3}},927:function(e,a,t){"use strict";t.d(a,"b",(function(){return r})),t.d(a,"a",(function(){return o}));var r=2,o=Math.pow(10,r)},938:function(e,a,t){"use strict";t.d(a,"a",(function(){return s})),t.d(a,"c",(function(){return n})),t.d(a,"b",(function(){return i})),t.d(a,"d",(function(){return c}));var r,o=t(39),l=t(927),s=(r="CELR",{formatter:e=>e?"".concat(e).concat(r):"",parser:e=>e.replace(/[A-Z]/g,"")}),n=e=>({validator:(a,t,r)=>{t<e&&r("value is smaller than ".concat(e));r()}}),i={name:"commissionRate",label:"Commission Rate",field:"number",fieldOptions:Object(o.a)(Object(o.a)({},{formatter:e=>e?"".concat(e,"%"):"",parser:e=>e.replace(/[%]/g,"")}),{},{placeholder:"The commission rate",step:1/l.a,precision:l.b}),rules:[n(0),{message:"Please enter a commission rate!",required:!0}]},c={name:"rateLockEndTime",label:"Rate Lock End Time",fieldOptions:{placeholder:"The rate lock end time",prefix:"+",suffix:"blocks"},rules:[{message:"Please enter a rate lock end time!",required:!0}]}}}]);
//# sourceMappingURL=12.9fd637f6.chunk.js.map